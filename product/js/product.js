var slideCount=1;$(document).ready(function(){raty();video();});function video(){$(".carousel").bind('slide.bs.carousel',function(e){var currentIndex=$('div.active').index()+1;console.log("currentIndex in carousel is "+currentIndex);if(currentIndex===2){$('.carousel').data("bs.carousel").options.interval='50000';}else{$('.carousel').data("bs.carousel").options.interval='5000';}});}function pincodeCheck(){if($('#delivery_pincode_text').val()==''||$('#delivery_pincode_text').val().length<6){$('#delivery_pincode_text').css('border-color','red');return;}else{$('#delivery_pincode_text').css('border-color','');}$.ajax({url:'/checkPincodeAvailability',contentType:'text/plain',method:'GET',data:'pincode='+$("#delivery_pincode_text").val(),success:function(data){displayPincodeAvailabilityStatus(data);}});}function displayPincodeAvailabilityStatus(dto){if(dto.status=='fail'){$("#pincode_status_div").css('color','red');$("#pincode_status_div").html(dto.message);$("#expected_delivery_date_div").html("");$("#pincode_container").show();}else{$("#pincode_status_div").css('color','green');$("#pincode_status_div").html(dto.message);$("#expected_delivery_date_div").html(dto.expectedDeliveryDate);$("#pincode_container").show();}}function pills(){$('#rootwizard').bootstrapWizard();}function raty(){$.fn.raty.defaults.path='resources/assets/product/images';$('#rating').raty({readOnly:true,score:function(){return $(this).attr('data-score');}});$('.individual_review').raty({readOnly:true,score:function(){return $(this).attr('data-score');}});}function zoom(){$("#zoom_03").elevateZoom({gallery:'gallery_01',cursor:'pointer',galleryActiveClass:'active',imageCrossfade:true,zoomWindowWidth:570,zoomWindowHeight:430,loadingIcon:'resources/assets/listing/images/GreenLoader.gif'});$("#zoom_03").bind("click",function(e){var ez=$('#zoom_03').data('elevateZoom');$.fancybox(ez.getGalleryList());return false;});}function search(){var keywordsEngine=new Bloodhound({datumTokenizer:function(datum){return Bloodhound.tokenizers.whitespace(datum.value.toString());},queryTokenizer:Bloodhound.tokenizers.whitespace,remote:{url:'/search/getTerms?',replace:function(url,uriEncodedQuery){var val=$(".typeahead").filter(":focus").attr("id").slice(0,-2);var res=(url+"&query="+encodeURIComponent(uriEncodedQuery));return res},filter:function(keywords){return $.map(keywords,function(keyword){console.log("keyword "+JSON.stringify(keywords));return{value:keyword.name};});}},dupDetector:function(remoteMatch,localMatch){return remoteMatch.value===localMatch.value;}});$('#scrollable-dropdown-menu .typeahead').typeahead(null,{name:'keyword',displayKey:'value',source:keywordsEngine.ttAdapter()});}function isEmptyString(str){return(!str||0===str.length);}function changeMainImage(url){document.getElementById("zoom_03").src=url;$(".zoomWindow").css("background-image","url("+url+")");}function displayAdditional(id,urls,colorId){$(".color_image").each(function(){var currentid=$(this).attr("id");if(id===currentid){$(this).css("border","2px solid red");}else{$(this).css("border","2px solid #00B9E5");}});$("#selected_color").val(colorId);var elements="";if(urls){var url=JSON.parse(urls);for(i=0;i<url.length;i++){var image=url[i].image;var element='<li class="mTSThumbContainer"><a data-zoom-image="'+image+'" data-image="'+image+'" href="#" onclick="changeMainImage(\''+image+'\')"><img height="75" width="75" src="'+image+'" id="zoom_03" class="mTSThumb"></a></li>';elements+=element;}}else{}$("#mTS_1_container").empty();$("#mTS_1_container").append(elements);}function isProductSelected(){if($("#no_of_colors").val()>1){if($("#selected_color").val()==="NIL"){alert("Please select a color");return false;}}else{$("#selected_color").val($("#only_one_color").val());}return true;}function buyNow(pid,price,name,image,addToCartType){var size=$("#selected_size").val();var quantity=$('#quantity_text').val();if(!isProductSelected()){return;}var colorId=Number($("#selected_color").val());console.log(pid,+" "+name+" "+price,+" "+image+" "+" "+quantity+" "+size,+" colorId = "+colorId);var input='<input type="hidden" name="pid" value="'+pid+'" />';input+='<input type="hidden" name="name" value="'+name+'" />';input+='<input type="hidden" name="price" value="'+price+'" />';input+='<input type="hidden" name="image" value="'+image+'" />';input+='<input type="hidden" name="quantity" value="'+quantity+'" />';input+='<input type="hidden" name="size" value="'+size+'" />';input+='<input type="hidden" name="colorId" value="'+colorId+'" />';$("body").append('<form action="checkout" method="post" id="buyNow">'+input+'</form>');$("#buyNow").submit();}